{
  "name": "NetAlertX DevContainer",
  "build": {
    "dockerfile": "Dockerfile",
    "context": "../"
  },
  "workspaceFolder": "/workspaces/NetAlertX",

  "runArgs": [
    "--privileged",
    // Ensure containers can resolve host.docker.internal to the host (required on Linux)
    "--add-host=host.docker.internal:host-gateway"
  ],
  
  "postCreateCommand": "${containerWorkspaceFolder}/.devcontainer/scripts/setup.sh",
  // Run setup on every container start to ensure services are started when the devcontainer starts
  // (postStartCommand removed so VS Code workspace task `Start NetAlertX (setup + logs)` can run on folder open)
  // // Ensure setup also runs when attaching to an existing container (covers rebuild/attach cases)
  // "postAttachCommand": "sh -c ''",

  "customizations": {
    "vscode": {
      "extensions": [
        "ms-python.python",
        "ms-azuretools.vscode-docker",
        "felixfbecker.php-debug",
        "bmewburn.vscode-intelephense-client",
        "xdebug.php-debug"
      ]
      ,
      "settings": {
        "terminal.integrated.cwd": "${containerWorkspaceFolder}"
      }
    }
  },
  "forwardPorts": [20211, 20212, 9003, 5678],

  // Optional: Give friendly names to forwarded ports so VS Code Ports view shows labels
  "portsAttributes": {
    "20211": {
      "label": "NetAlertX (app)"
    },
    "20212": {
      "label": "NetAlertX (data)"
    },
    "9003": {
      "label": "PHP Debug (Xdebug)"
    },
    "5678": {
      "label": "Python Debug"
    }
  },

  // Optional: ensures compose services are stopped when you close the window
  "shutdownAction": "stopContainer"
}