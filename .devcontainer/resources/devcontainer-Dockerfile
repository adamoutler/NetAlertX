# Dockerfile extension for devcontainer
# This stage uses the result of the stage above as its starting point.

FROM runner
ENV INSTALL_DIR=/app

COPY install/netalertx.template.conf /netc/nginx/conf.d/netalert-frontend.conf
# Install common tools, xdebug and pip
RUN apk add --no-cache git nano vim jq php83-pecl-xdebug py3-pip nodejs
# Install debugpy in the virtualenv if present, otherwise into system python3
RUN /bin/sh -c '(/opt/venv/bin/python3 -m pip install --no-cache-dir debugpy) || (python3 -m pip install --no-cache-dir debugpy) || true'
WORKDIR /workspaces/NetAlertX